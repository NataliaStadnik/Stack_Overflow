import{i as x,e as f,r as h,b as j,f as y,c as S,j as s,L as P,d as v}from"./index-BM7gXiEi.js";import{H as N}from"./HeaderSection-COAfhMFu.js";import{u as w,P as E,D as b}from"./usePages-BZQ-M0hh.js";import{S as C}from"./SnippetsList-CeRAs12f.js";import{f as L}from"./fetchComments-BR2g0jFQ.js";import"./IconButton-D6lSfURL.js";import"./Snippet-Dxp0p7dO.js";import"./Message-CnKAuWI7.js";async function D(i,e){const r=(await x.get(`/snippets?userId=${i}&page=${e}`)).data,t=JSON.parse(JSON.stringify(r.data));return await Promise.all(t.data.map(async n=>{const o=await L(n.id);n.comments=o.comments})),t}const M=()=>{const[i]=f(),[e,r]=h.useState(i.get("page")||"1"),t=j(p=>p.userState.id),n=y(),{error:o,isError:m,isSuccess:d,data:a,isPending:l,refetch:u,isFetching:c}=S({queryFn:()=>D(t,e),queryKey:[`snippets/${t}`],retry:1});if(w({page:e,setPage:r,refetch:u}),l)return s.jsx(P,{type:"big"});const g=p=>{p.preventDefault(),n("/snippet/new")};return s.jsxs(s.Fragment,{children:[s.jsx(N,{title:"My Snippets"}),s.jsx(E,{currentPage:e,setPage:r,maxPage:a==null?void 0:a.meta.totalPages}),c&&s.jsx(b,{}),m&&s.jsx("div",{children:s.jsxs("span",{className:"error",children:["Error: ",o.message]})}),d&&(a.data.length?s.jsx(C,{classes:c?"snippet-list__load":"",dataObj:a.data}):s.jsxs("div",{className:"empty",children:[s.jsx("p",{className:"title no-snippets",children:"You don't have any snippets!"}),s.jsx(v.Button,{href:"/snippet/new",classes:"no-snippets-btn",size:"large",variant:"text",onClick:g,children:"Create snippet"})]}))]})};export{M as default};
//# sourceMappingURL=MySnippetsPage-D2E3YiEm.js.map
