import{c as m,j as s,U as x,d as p,L as g,i as h,e as j,r as f}from"./index-BM7gXiEi.js";import{H as y}from"./HeaderSection-COAfhMFu.js";import{u as P,P as E,D as S}from"./usePages-BZQ-M0hh.js";import{U,g as N,I as v,f as F}from"./UserInfo-BaL3RFY8.js";import"./IconButton-D6lSfURL.js";import"./index-ans_9-if.js";const q=({dataObj:e})=>{var c;const{error:r,data:n,refetch:o,isFetching:l,isSuccess:i,isError:u}=m({queryFn:()=>F(e.id),queryKey:[`${e.id}/statistic`],enabled:!1}),a=()=>{o()};return s.jsxs("div",{className:`one-user ${i?"one-user-statistic":""}`,children:[s.jsx(x,{color:"grey",classes:"one-user__img"}),s.jsx(U,{data:e}),!i&&s.jsx(p.Button,{onClick:a,children:l?s.jsx(g,{type:"small"}):"Show statistic"}),u&&s.jsx("div",{className:"error-message",children:s.jsxs("span",{className:"error",children:["Error: ",r.message]})}),i&&s.jsx("ul",{className:"infos-list",children:(c=N(n))==null?void 0:c.map(t=>s.jsx(v,{label:t.label,value:t.value},t.id))})]})};async function w(e="1"){return(await h.get(`/users?page=${e}`).catch(r=>{throw new Error(r.response.data.message)})).data.data}const k=()=>{const[e]=j(),[r,n]=f.useState(e.get("page")||"1"),{error:o,isError:l,isSuccess:i,isPending:u,data:a,refetch:c,isFetching:t}=m({queryFn:()=>w(r),queryKey:["users"],retry:1});return P({page:r,setPage:n,refetch:c}),u?s.jsx(g,{type:"big"}):s.jsxs("section",{className:"all-users",children:[s.jsx(y,{title:"All Users"}),s.jsx(E,{currentPage:r,setPage:n,maxPage:a==null?void 0:a.meta.totalPages}),t&&s.jsx(S,{}),l&&s.jsx("div",{children:s.jsxs("span",{className:"error",children:["Error: ",o.message]})}),i&&s.jsx("ul",{className:`all-users-list ${t?"snippet-list__load":""}`,children:a.data.map(d=>s.jsx(q,{dataObj:d},d.id))})]})};export{k as default};
//# sourceMappingURL=AllUsersPage-dqdu1_ER.js.map
