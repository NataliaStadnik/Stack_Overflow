import{i as h,r as g,u as _,q as y,j as e,d as b,L as w}from"./index-BM7gXiEi.js";import{u as C,t as E,I as p}from"./zod-CberE-wn.js";import{z as c}from"./index-ans_9-if.js";import{E as Q}from"./ErrorMessageFetch-2ytYcsZd.js";import{C as S}from"./CodeEditor-DXR2qW-n.js";const k=c.object({title:c.string().min(1,"Title should be at least 1 characters"),description:c.string().min(1,"Description should be at least 1 characters")});async function q(t,a){const r={...t,attachedCode:a};await h.post("/questions",r).catch(s=>{throw new Error(s.response.data.message)})}async function M(t,a,r){const s={...t,attachedCode:a};await h.patch(`/questions/${r}`,s).catch(o=>{throw new Error(o.response.data.message)})}const V=({newTitle:t="",newCode:a="",newDescr:r="",updateID:s=""})=>{var m,d;const[o,f]=g.useState(a),{register:u,handleSubmit:x,formState:{errors:l},reset:j}=C({resolver:E(k)}),i=_({mutationFn:n=>s?M(n,o,s):q(n,o),onSuccess(){j(),y.invalidateQueries({queryKey:["questions"]})}});return e.jsxs("form",{className:"ask-form",onSubmit:x(n=>{i.mutate(n)}),children:[e.jsx(p,{classes:"ask-form__input",type:"text",placeholder:"Question title",inputProp:{...u("title")},errorMessage:(m=l.title)==null?void 0:m.message,newValue:t}),e.jsx(p,{classes:"ask-form__input",type:"text",placeholder:"Question description",inputProp:{...u("description")},errorMessage:(d=l.description)==null?void 0:d.message,newValue:r}),e.jsxs("div",{className:"ask-form__body",children:[e.jsx("p",{className:"ask-form__title",children:"Attached code:"}),e.jsx(S,{value:o,setValue:f,classes:"new-snippet__code",readonly:!1})]}),e.jsx(Q,{mutation:i}),i.isSuccess&&e.jsxs("span",{className:"register--correct",children:["Question ",s?"updated":"created",' successfully!"']}),e.jsx(b.Button,{classes:"ask-form__btn",children:i.isPending?e.jsx(w,{type:"small"}):"Confirm"})]})};export{V as C};
//# sourceMappingURL=CreateQuestion-D53X2PUZ.js.map
