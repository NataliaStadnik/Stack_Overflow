{"version":3,"file":"EditSnippetPage-CWAK_KLH.js","sources":["../../src/api/snippets/deleteSnippet.ts","../../src/Pages/EditSnippetPage/EditSnippetPage.tsx"],"sourcesContent":["import { instance } from \"../config\";\n\nexport async function deleteSnippet(id: string): Promise<void> {\n  await instance.delete(`/snippets/${id}`)\n  .catch((err) => {\n    throw new Error(err.response.data.message)\n  })\n}\n","import HeaderSection from \"../../Widgets/HeaderSection/HeaderSection\";\nimport \"./editSnippetPage.css\";\nimport NewSnippet from \"../../Widgets/NewSnippet/NewSnippet\";\nimport useLastIdLocation from \"../../hooks/useLastIdLocation\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { fetchComments } from \"../../api/snippets/fetchComments\";\nimport Loader from \"../../Shared/Loader/Loader\";\nimport { Button } from \"ui-components_innowise\";\nimport { queryCLient } from \"../../api/queryClients\";\nimport { deleteSnippet } from \"../../api/snippets/deleteSnippet\";\nimport ErrorMessageFetch from \"../../Shared/ErrorMessageFetch/ErrorMessageFetch\";\nimport { useNavigate } from \"react-router\";\n\nconst EditSnippetPage = () => {\n  const locationId = useLastIdLocation();\n  const navigate = useNavigate();\n\n  const deleteMutation = useMutation({\n    mutationFn: () => deleteSnippet(locationId),\n    onSuccess() {\n      queryCLient.invalidateQueries({ queryKey: [`snippets`] });\n      navigate(\"/my_snippets\");\n    },\n  });\n\n  const { error, isError, isSuccess, isPending, data } = useQuery({\n    queryFn: () => fetchComments(locationId),\n    queryKey: [`snippets/${locationId}}`],\n    retry: 1,\n  });\n\n  if (isPending) {\n    return <Loader type=\"big\" />;\n  }\n\n  return (\n    <section className=\"section__snippet section__edit-snippet\">\n      <HeaderSection title=\"Edit Snippet\" />\n      {deleteMutation.isError && (\n        <ErrorMessageFetch mutation={deleteMutation} />\n      )}\n      <Button\n        classes=\"delete-snippet\"\n        onClick={() => deleteMutation.mutate()}\n        variant=\"text\"\n      >\n        {deleteMutation.isPending ? <Loader type=\"small\" /> : \"Delete snippet\"}\n      </Button>\n      {isSuccess && (\n        <NewSnippet\n          update\n          selects={data.code}\n          values={data.language}\n          snippetID={data.id}\n        />\n      )}\n\n      {isError && (\n        <div>\n          <span className=\"error\">Error: {error.message}</span>\n        </div>\n      )}\n    </section>\n  );\n};\n\nexport default EditSnippetPage;\n"],"names":["deleteSnippet","id","instance","err","EditSnippetPage","locationId","useLastIdLocation","navigate","useNavigate","deleteMutation","useMutation","queryCLient","error","isError","isSuccess","isPending","data","useQuery","fetchComments","jsx","Loader","jsxs","HeaderSection","ErrorMessageFetch","Button","NewSnippet"],"mappings":"+WAEA,eAAsBA,EAAcC,EAA2B,CACvD,MAAAC,EAAS,OAAO,aAAaD,CAAE,EAAE,EACtC,MAAOE,GAAQ,CACd,MAAM,IAAI,MAAMA,EAAI,SAAS,KAAK,OAAO,CAAA,CAC1C,CACH,CCMA,MAAMC,EAAkB,IAAM,CAC5B,MAAMC,EAAaC,EAAkB,EAC/BC,EAAWC,EAAY,EAEvBC,EAAiBC,EAAY,CACjC,WAAY,IAAMV,EAAcK,CAAU,EAC1C,WAAY,CACVM,EAAY,kBAAkB,CAAE,SAAU,CAAC,UAAU,EAAG,EACxDJ,EAAS,cAAc,CAAA,CACzB,CACD,EAEK,CAAE,MAAAK,EAAO,QAAAC,EAAS,UAAAC,EAAW,UAAAC,EAAW,KAAAC,GAASC,EAAS,CAC9D,QAAS,IAAMC,EAAcb,CAAU,EACvC,SAAU,CAAC,YAAYA,CAAU,GAAG,EACpC,MAAO,CAAA,CACR,EAED,OAAIU,EACKI,EAAA,IAACC,EAAO,CAAA,KAAK,KAAM,CAAA,EAI1BC,EAAA,KAAC,UAAQ,CAAA,UAAU,yCACjB,SAAA,CAACF,EAAAA,IAAAG,EAAA,CAAc,MAAM,cAAe,CAAA,EACnCb,EAAe,SACbU,EAAA,IAAAI,EAAA,CAAkB,SAAUd,EAAgB,EAE/CU,EAAA,IAACK,EAAA,OAAA,CACC,QAAQ,iBACR,QAAS,IAAMf,EAAe,OAAO,EACrC,QAAQ,OAEP,WAAe,UAAYU,EAAA,IAACC,EAAO,CAAA,KAAK,QAAQ,EAAK,gBAAA,CACxD,EACCN,GACCK,EAAA,IAACM,EAAA,CACC,OAAM,GACN,QAAST,EAAK,KACd,OAAQA,EAAK,SACb,UAAWA,EAAK,EAAA,CAClB,EAGDH,GACEM,EAAAA,IAAA,MAAA,CACC,SAACE,OAAA,OAAA,CAAK,UAAU,QAAQ,SAAA,CAAA,UAAQT,EAAM,OAAA,CAAA,CAAQ,CAChD,CAAA,CAAA,EAEJ,CAEJ"}