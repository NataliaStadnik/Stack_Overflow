import{i as N,j as s,f as m,u as g,d as p,L as u,g as h,a as S,h as w,s as y,k as C}from"./index-BM7gXiEi.js";import{I as E}from"./IconButton-D6lSfURL.js";import{C as k}from"./Close-D6xosMpA.js";import{u as x,t as f,I as j}from"./zod-CberE-wn.js";import{z as c}from"./index-ans_9-if.js";import{l as v,K as M,c as P,a as L}from"./loginElementArr-Bu_bBODg.js";import{E as b}from"./ErrorMessageFetch-2ytYcsZd.js";const _=c.object({username:c.string().min(5,"Username should be at least 5 characters"),password:c.string().regex(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password must contain at least one lowercase letter, one uppercase letter, one number and one symbol"),confirm:c.string().min(6,"Password should be at least 6 characters")}).refine(t=>t.password===t.confirm,{message:"The passwords don't match",path:["confirm"]});async function A(t){const n=Object.fromEntries(Object.entries(t).filter(([r])=>r!=="confirm"));await N.post("/register",n).catch(r=>{throw new Error(r.response.data.message)})}const I=[...v,{id:3,svg:s.jsx(M,{}),placeholder:"Confirm password",type:"password",name:"confirm"}],F=()=>{const t=m(),{register:n,handleSubmit:r,formState:{errors:o},reset:l}=x({resolver:f(_)}),i=g({mutationFn:A,onSuccess(){l(),t("/login")}});return s.jsxs("div",{className:"modal",children:[s.jsx("h2",{className:"title",children:"Sign up to Codelang"}),s.jsxs("form",{className:"modal-form",onSubmit:r(a=>{i.mutate(a)}),children:[I.map(a=>{var e;return s.jsx(j,{svg:a.svg,placeholder:a.placeholder,type:a.type,inputProp:{...n(a.name)},errorMessage:(e=o[a.name])==null?void 0:e.message},a.id)}),s.jsx(b,{mutation:i}),s.jsx(p.Button,{classes:"btn-confirm",children:i.isPending?s.jsx(u,{type:"small"}):"Confirm"})]}),s.jsxs("div",{className:"sign",children:[s.jsx("p",{className:"sign__text",children:"Already have an account?"}),s.jsx(h,{className:"sign__link",to:"/login",children:"Sign in"})]})]})},B=()=>{const t=S(),n=m(),{register:r,handleSubmit:o,formState:{errors:l},reset:i}=x({resolver:f(P)}),a=g({mutationFn:L,onSuccess(e){t(w()),i(),t(y(e)),n("/")}});return s.jsxs("div",{className:"modal",children:[s.jsx("h2",{className:"title",children:"Sign in to Codelang"}),s.jsxs("form",{className:"modal-form",onSubmit:o(e=>{a.mutate(e)}),children:[v.map(e=>{var d;return s.jsx(j,{svg:e.svg,placeholder:e.placeholder,type:e.type,inputProp:{...r(e.name)},errorMessage:(d=l[e.name])==null?void 0:d.message},e.id)}),s.jsx(b,{mutation:a}),s.jsx(p.Button,{classes:"btn-confirm",children:a.isPending?s.jsx(u,{type:"small"}):"Confirm"})]}),s.jsx("div",{className:"sign",children:s.jsx(h,{className:"sign__link",to:"/register",children:"Create an account"})})]})},$=({type:t})=>{const n=m(),r=o=>{o.target.id==="backdrop"&&n("/")};return C.createPortal(s.jsx("div",{id:"backdrop",className:"backdrop",onClick:o=>r(o),children:s.jsxs("div",{className:"modal-wrapper",children:[s.jsx(E,{classes:"close-btn",svg:s.jsx(k,{classes:"close-modal-svg"}),onClick:()=>n("/")}),t==="register"?s.jsx(F,{}):s.jsx(B,{})]})}),document.body)};export{$ as default};
//# sourceMappingURL=Modal-BrXD7VC8.js.map
