import{i as d,e as g,r as l,c as u,j as s,L as f,F as x}from"./index-BM7gXiEi.js";import{H as h}from"./HeaderSection-COAfhMFu.js";import{u as j,P,D as y}from"./usePages-BZQ-M0hh.js";import{S}from"./SnippetsList-CeRAs12f.js";import{f as w}from"./fetchComments-BR2g0jFQ.js";import"./IconButton-D6lSfURL.js";import"./Snippet-Dxp0p7dO.js";import"./Message-CnKAuWI7.js";async function E(a="1"){return(await d.get(`/snippets?page=${a}`).catch(e=>{throw new Error(e.response.data.message)})).data.data}async function v(a="1"){const e=await E(a),t=JSON.parse(JSON.stringify(e));return await Promise.all(t.data.map(async r=>{const n=await w(r.id);r.comments=n.comments})),t}const q=()=>{const[a]=g(),[e,t]=l.useState(a.get("page")||"1"),{error:r,isError:n,isSuccess:c,data:o,isPending:m,refetch:p,isFetching:i}=u({queryFn:()=>v(e),queryKey:["snippets"],retry:1});return j({page:e,setPage:t,refetch:p}),m?s.jsx(f,{type:"big"}):s.jsxs("div",{className:"section__home",children:[s.jsx(h,{title:"Welcom to Codelang!",children:s.jsx(x,{classes:"title-favicon",color:"#000"})}),s.jsx(P,{currentPage:e,setPage:t,maxPage:o==null?void 0:o.meta.totalPages}),i&&s.jsx(y,{}),n&&s.jsx("div",{children:s.jsxs("span",{className:"error",children:["Error: ",r.message]})}),c&&s.jsx(S,{classes:i?"snippet-list__load":"",dataObj:o.data})]})};export{q as default};
//# sourceMappingURL=HomePage-oNkCtA7M.js.map
