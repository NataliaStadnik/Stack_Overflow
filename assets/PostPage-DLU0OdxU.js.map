{"version":3,"file":"PostPage-DLU0OdxU.js","sources":["../../src/Pages/PostPage/PostPage.tsx"],"sourcesContent":["import { Button } from \"ui-components_innowise\";\nimport \"./postPage.css\";\nimport Comment from \"../../Shared/Comment/Comment\";\nimport Snippet from \"../../Widgets/Snippet/Snippet\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport Loader from \"../../Shared/Loader/Loader\";\nimport { fetchComments } from \"../../api/snippets/fetchComments\";\nimport { useState } from \"react\";\nimport NewComment from \"../../Widgets/NewComment/NewComment\";\nimport useLastIdLocation from \"../../hooks/useLastIdLocation\";\n\nconst PostPage = () => {\n  const locationId = useLastIdLocation();\n  const [status, setStatus] = useState(false);\n\n  const { error, isError, isSuccess, isPending, data } = useQuery({\n    queryFn: () => fetchComments(locationId),\n    queryKey: [`snippets/${locationId}`],\n    retry: 1,\n  });\n\n  if (isPending) {\n    return <Loader type=\"big\" />;\n  }\n\n  if (isSuccess) {\n    data?.comments?.sort((a, b) => (Number(a.id) > Number(b.id) ? 1 : -1));\n  }\n\n  return (\n    <section className=\"post-page\">\n      <div className=\"post-page-btn__wrapper\">\n        <Button\n          onClick={() => setStatus(true)}\n          classes=\"edit-snippet addcomment-snippet\"\n        >\n          Add comment\n        </Button>\n      </div>\n\n      {isError && (\n        <div>\n          <span className=\"error\">Error: {error.message}</span>\n        </div>\n      )}\n\n      {isSuccess && (\n        <Snippet\n          dataObj={data}\n          children={\n            <ul className=\"commemts-list\">\n              {status && (\n                <NewComment setStatus={setStatus} snippetId={locationId} />\n              )}\n              {data.comments?.reverse().map((elem) => (\n                <Comment key={elem.id} comment={elem} />\n              ))}\n            </ul>\n          }\n        />\n      )}\n    </section>\n  );\n};\n\nexport default PostPage;\n"],"names":["PostPage","locationId","useLastIdLocation","status","setStatus","useState","error","isError","isSuccess","isPending","data","useQuery","fetchComments","jsx","Loader","_a","a","b","jsxs","Button","Snippet","NewComment","_b","elem","Comment"],"mappings":"4bAWA,MAAMA,EAAW,IAAM,SACrB,MAAMC,EAAaC,EAAkB,EAC/B,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAK,EAEpC,CAAE,MAAAC,EAAO,QAAAC,EAAS,UAAAC,EAAW,UAAAC,EAAW,KAAAC,GAASC,EAAS,CAC9D,QAAS,IAAMC,EAAcX,CAAU,EACvC,SAAU,CAAC,YAAYA,CAAU,EAAE,EACnC,MAAO,CAAA,CACR,EAED,OAAIQ,EACKI,EAAA,IAACC,EAAO,CAAA,KAAK,KAAM,CAAA,GAGxBN,KACFO,EAAAL,GAAA,YAAAA,EAAM,WAAN,MAAAK,EAAgB,KAAK,CAACC,EAAGC,IAAO,OAAOD,EAAE,EAAE,EAAI,OAAOC,EAAE,EAAE,EAAI,EAAI,KAIlEC,EAAA,KAAC,UAAQ,CAAA,UAAU,YACjB,SAAA,CAACL,EAAAA,IAAA,MAAA,CAAI,UAAU,yBACb,SAAAA,EAAA,IAACM,EAAA,OAAA,CACC,QAAS,IAAMf,EAAU,EAAI,EAC7B,QAAQ,kCACT,SAAA,aAAA,CAAA,EAGH,EAECG,GACEM,EAAAA,IAAA,MAAA,CACC,SAACK,OAAA,OAAA,CAAK,UAAU,QAAQ,SAAA,CAAA,UAAQZ,EAAM,OAAA,CAAA,CAAQ,CAChD,CAAA,EAGDE,GACCK,EAAA,IAACO,EAAA,CACC,QAASV,EACT,SACEQ,EAAA,KAAC,KAAG,CAAA,UAAU,gBACX,SAAA,CAAAf,GACEU,EAAA,IAAAQ,EAAA,CAAW,UAAAjB,EAAsB,UAAWH,EAAY,GAE1DqB,EAAAZ,EAAK,WAAL,YAAAY,EAAe,UAAU,IAAKC,GAC7BV,MAACW,EAAsB,CAAA,QAASD,CAAlB,EAAAA,EAAK,EAAmB,EACvC,CACH,CAAA,CAAA,CAAA,CAEJ,EAEJ,EAEJ"}